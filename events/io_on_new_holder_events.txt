namepace = io_on_new_holder_event

character_event = {
	id = io_on_new_holder_event.1
	is_triggered_only = yes 
	hide_window = yes
	only_playable = yes
	trigger = {
		io_can_be_imperial_trigger = yes
		independent = no
		liege = {
			OR = {
				has_character_flag = io_imperial
				has_character_flag = io_chinese_imperial
			}
		}
	}
	immediate = {
		liege = {
			opinion = {
				modifier = imperial_government
				who = ROOT
			}
			reverse_opinion = {
				modifier = imperial_government
				who = ROOT
			}
		}
		if = {
			limit = {
				NOT = {
					primary_title = {has_title_flag = starts_as_feudal}
					is_government_potential = chinese_imperial_government
					is_government_potential = chinese_bureaucracy_government
				}
				OR = {
					io_starts_as_imperial_trigger = yes
					top_liege = {government = roman_imperial_government}
				}
			}
			set_character_flag = io_imperial
			
		}

		if = {
			limit = {
				NOT = {
					primary_title = {has_title_flag = starts_as_feudal}
				}
				OR = {
					liege = {government = chinese_bureaucracy_government}
					liege = {government = chinese_imperial_government}
				}
			}
			set_character_flag = io_chinese_imperial
			if = {
				limit = {
					independent = no
					higher_tier_than = baron
				}
				set_government_type = chinese_bureaucracy_government
			}
		}
	}
}

character_event = {
	id = io_on_new_holder_event.2
	is_triggered_only = yes 
	hide_window = yes
	only_playable = yes
	trigger = {
		FROMFROM = {
			OR = {
				has_character_flag = io_imperial
				has_character_flag = io_chinese_imperial
				has_character_flag = io_not_imperial
			}
			is_landed = no
		}
	}
	immediate = {
		FROMFROM = {
			clr_character_flag = io_imperial
			clr_character_flag = io_chinese_imperial
			clr_character_flag = io_not_imperial
		}
	}
}